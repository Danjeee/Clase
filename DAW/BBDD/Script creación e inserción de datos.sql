CREATE DATABASE IF NOT EXISTS concesionario2;
USE concesionario2;
 
 
CREATE TABLE COCHE
(
	Codcoche INT PRIMARY KEY NOT NULL,
	Marca VARCHAR(20) NOT NULL,
	Modelo VARCHAR(20) NOT NULL,
	Motor VARCHAR(10) NOT NULL
);
 
INSERT INTO COCHE VALUES (0001,'Seat','ibiza','16V');
INSERT INTO COCHE VALUES (0002,'Seat','ibiza','tsi');
INSERT INTO COCHE VALUES (0003,'Seat','ibiza','tdi');
INSERT INTO COCHE VALUES (0004,'Seat','leon','Style Copa');
INSERT INTO COCHE VALUES (0005,'Seat','altea','ecomotive');
INSERT INTO COCHE VALUES (0006,'Renault','megane','GT Line');
INSERT INTO COCHE VALUES (0007,'Renault','megane','gti');
INSERT INTO COCHE VALUES (0008,'Renault','laguna','Berlina');
INSERT INTO COCHE VALUES (0009,'Renault','laguna','coupé');
INSERT INTO COCHE VALUES (0010,'Citroen','c4','16V');
INSERT INTO COCHE VALUES (0011,'Citroen','c4','hdi');
INSERT INTO COCHE VALUES (0012,'Citroen','c5','hdi');
INSERT INTO COCHE VALUES (0013,'Audi','a4','1.8');
INSERT INTO COCHE VALUES (0014,'Audi','a4','2.8');
INSERT INTO COCHE VALUES (0015,'Opel','astra','caravan');
INSERT INTO COCHE VALUES (0016,'Opel','astra','gti');
INSERT INTO COCHE VALUES (0017,'Opel','corsa','1.4');
INSERT INTO COCHE VALUES (0018,'Fiat','300','318d');
INSERT INTO COCHE VALUES (0019,'Fiat','500','520d');
INSERT INTO COCHE VALUES (0020,'Fiat','700','730d');
 
 
CREATE TABLE CONCESIONARIO
(
	Cif INT PRIMARY KEY NOT NULL,
	Nombre VARCHAR(20) NOT NULL,
	Ciudad VARCHAR(20) NOT NULL
);
 
INSERT INTO CONCESIONARIO VALUES(0001,'Castellana Motor','Madrid');
INSERT INTO CONCESIONARIO VALUES(0002,'Wagen Goup España','Barcelona');
INSERT INTO CONCESIONARIO VALUES(0003,'Ibauto','Bilbao');
INSERT INTO CONCESIONARIO VALUES(0004,'Autoval','Valencia');
INSERT INTO CONCESIONARIO VALUES(0005,'Opel Autotodo','Madrid');
INSERT INTO CONCESIONARIO VALUES(0006,'Sauto-Saguntina','Valencia');
 
CREATE TABLE CLIENTE
(
	DNI VARCHAR(9) PRIMARY KEY NOT NULL,
	Nombre VARCHAR(20) NOT NULL,
	Apellidos VARCHAR(30) NOT NULL,
	Ciudad VARCHAR (20) NOT NULL
);
 
INSERT INTO CLIENTE VALUES('11111111A','Luis','Garcia','Madrid');
INSERT INTO CLIENTE VALUES('22222222B','Antonio','Lopez','Valencia');
INSERT INTO CLIENTE VALUES('33333333C','Juan','Martin','Madrid');
INSERT INTO CLIENTE VALUES('44444444D','Maria','Garcia','Madrid');
INSERT INTO CLIENTE VALUES('55555555E','Ana','Pérez','Barcelona');
INSERT INTO CLIENTE VALUES('66666666F','Laura','Guillem','Valencia');
 
 
CREATE TABLE DISTRIBUCION
(
	Cif INT NOT NULL,
	Codcoche INT NOT NULL,
	Stock INT NOT NULL,
	CONSTRAINT pk_distribucion PRIMARY KEY(Cif,Codcoche),
	CONSTRAINT fk_dist_coche FOREIGN KEY (Codcoche) REFERENCES COCHE(Codcoche),
	CONSTRAINT fk_dist_concesionario FOREIGN KEY (Cif) REFERENCES CONCESIONARIO(cif)
);
 
INSERT INTO DISTRIBUCION VALUES (0001,0001,3);
INSERT INTO DISTRIBUCION VALUES (0001,0005,7);
INSERT INTO DISTRIBUCION VALUES (0001,0006,7);
INSERT INTO DISTRIBUCION VALUES (0001,0007,5);
INSERT INTO DISTRIBUCION VALUES (0001,0008,10);
INSERT INTO DISTRIBUCION VALUES (0002,0009,10);
INSERT INTO DISTRIBUCION VALUES (0002,0010,5);
INSERT INTO DISTRIBUCION VALUES (0002,0011,3);
INSERT INTO DISTRIBUCION VALUES (0002,0012,5);
INSERT INTO DISTRIBUCION VALUES (0003,0013,10);
INSERT INTO DISTRIBUCION VALUES (0003,0014,5);
INSERT INTO DISTRIBUCION VALUES (0003,0015,10);
INSERT INTO DISTRIBUCION VALUES (0004,0016,20);
INSERT INTO DISTRIBUCION VALUES (0004,0017,8);
INSERT INTO DISTRIBUCION VALUES (0005,0004,7);
INSERT INTO DISTRIBUCION VALUES (0005,0006,19);
INSERT INTO DISTRIBUCION VALUES (0006,0020,12);
 
 
CREATE TABLE VENTA
(
	Cif INT NOT NULL,
	DNI VARCHAR(20) NOT NULL,
	Codcoche INT NOT NULL,
	Color VARCHAR(10) NOT NULL,
	CONSTRAINT pk_claveventa1 PRIMARY KEY (Cif,DNI,Codcoche),
	CONSTRAINT fk_venta_concesionario FOREIGN KEY (Cif) REFERENCES CONCESIONARIO(cif),
	CONSTRAINT fk_venta_cliente FOREIGN KEY (DNI) REFERENCES CLIENTE(dni),
	CONSTRAINT fk_venta_coche FOREIGN KEY (Codcoche) REFERENCES COCHE(codcoche)
);
 
INSERT INTO VENTA VALUES(0001,'11111111A',0001,'blanco');
INSERT INTO VENTA VALUES(0001,'22222222B',0005,'rojo');
INSERT INTO VENTA VALUES(0002,'33333333C',0008,'blanco');
INSERT INTO VENTA VALUES(0002,'11111111A',0006,'rojo');
INSERT INTO VENTA VALUES(0003,'44444444D',0011,'rojo');
INSERT INTO VENTA VALUES(0005,'44444444D',0014,'verde');
INSERT INTO VENTA VALUES(0004,'44444444D',0014,'verde');
INSERT INTO VENTA VALUES(0004,'55555555E',0012,'negro');
INSERT INTO VENTA VALUES(0006,'55555555E',0012,'negro');
